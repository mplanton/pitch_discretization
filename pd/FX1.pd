#N canvas 396 161 897 640 12;
#X declare -path pd-aubio/build;
#X declare -path /usr/lib/pd/extra/iemlib -lib iemlib;
#N canvas 72 96 450 300 include 0;
#X obj 14 81 aubio;
#X obj 14 52 declare -path pd-aubio/build;
#X obj 15 24 declare -path /usr/lib/pd/extra/iemlib -lib iemlib;
#X restore 23 17 pd include;
#X text 110 18 Artistic effects using one instance of reshift~.;
#X obj 464 132 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 393 45 ../../../samples/Toms_diner.wav;
#X msg 408 73 ../../../samples/ave-maria.wav;
#X obj 390 154 abs/player~;
#X msg 307 70 bang;
#X obj 307 101 openpanel;
#X text 619 45 in F#m;
#X obj 390 179 s~ \$0-sig;
#X obj 444 576 *~;
#X obj 435 606 dac~;
#X obj 545 535 hsl 128 15 0 127 0 0 empty empty vol -2 -8 0 10 -262144
-1 -1 9900 1;
#X obj 542 555 dbtorms;
#X floatatom 542 580 5 0 0 0 - - -;
#X obj 444 490 catch~ \$0-fx_sig;
#N canvas 72 405 505 413 pitch_discretization 0;
#X obj 38 351 throw~ \$0-fx_sig;
#X obj 38 216 r~ \$0-sig;
#X symbolatom 88 281 3 0 0 2 key - -;
#X symbolatom 140 281 10 0 0 2 scale - -;
#X floatatom 219 282 5 0 0 2 t_smooth - -;
#X floatatom 279 281 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X obj 37 306 reshift~ F# aeolian 440 200 15 0;
#X text 18 84 Pitch discretization to a musical scale using n=200 bands
for high quality. Sounds best if the right key and scale of the audio
material is found.;
#X text 21 137 You can "autotune" the input and change its scale.;
#X connect 1 0 11 0;
#X connect 2 0 11 1;
#X connect 3 0 11 2;
#X connect 4 0 11 3;
#X connect 5 0 11 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 6 0;
#X connect 11 0 0 0;
#X restore 34 309 pd pitch_discretization;
#X obj 34 285 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 32 228 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 72 405 553 381 discrete_freq_shifter 0;
#X obj 25 313 throw~ \$0-fx_sig;
#X obj 25 178 r~ \$0-sig;
#X symbolatom 75 243 3 0 0 2 key - -;
#X symbolatom 127 243 10 0 0 2 scale - -;
#X floatatom 206 244 5 0 0 2 t_smooth - -;
#X floatatom 266 243 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X obj 24 269 reshift~ C wholetone 440 1 15 0;
#X text 20 91 Using reshift with only one band for discretized frequency
shifting.;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X connect 1 0 9 0;
#X connect 2 0 9 1;
#X connect 3 0 9 2;
#X connect 4 0 9 3;
#X connect 5 0 9 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 0 0;
#X connect 11 0 12 0;
#X connect 12 0 6 0;
#X restore 32 252 pd discrete_freq_shifter;
#X obj 34 342 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#N canvas 72 266 1839 574 inharmonizer 0;
#X obj 24 517 throw~ \$0-fx_sig;
#X obj 25 134 r~ \$0-sig;
#X symbolatom 75 243 3 0 0 2 key - -;
#X symbolatom 127 243 10 0 0 2 scale - -;
#X floatatom 206 244 5 0 0 2 t_smooth - -;
#X floatatom 266 243 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 310 6 inlet;
#X obj 24 269 reshift~ C wholetone 440 2 15 0;
#X text 20 91 Using reshift with just a few bands and the wholetone
scale for bigger pitch shifts generates inharmonic sounds.;
#X obj 24 371 *~;
#X obj 42 349 line~;
#X msg 42 326 \$1 20;
#X obj 42 306 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 75 182 2 bands;
#X symbolatom 385 243 3 0 0 2 key - -;
#X symbolatom 437 243 10 0 0 2 scale - -;
#X floatatom 516 244 5 0 0 2 t_smooth - -;
#X floatatom 576 243 5 0 0 2 transpose - -;
#X obj 334 371 *~;
#X obj 352 349 line~;
#X msg 352 326 \$1 20;
#X obj 352 306 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 335 134 r~ \$0-sig;
#X obj 334 269 reshift~ C wholetone 440 3 15 0;
#X text 384 182 3 bands;
#X symbolatom 695 243 3 0 0 2 key - -;
#X symbolatom 747 243 10 0 0 2 scale - -;
#X floatatom 826 244 5 0 0 2 t_smooth - -;
#X floatatom 886 243 5 0 0 2 transpose - -;
#X obj 644 371 *~;
#X obj 662 349 line~;
#X msg 662 326 \$1 20;
#X obj 662 306 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 645 134 r~ \$0-sig;
#X text 694 182 4 bands;
#X obj 644 269 reshift~ C wholetone 440 4 15 0;
#X symbolatom 1005 243 3 0 0 2 key - -;
#X symbolatom 1057 243 10 0 0 2 scale - -;
#X floatatom 1136 244 5 0 0 2 t_smooth - -;
#X floatatom 1196 243 5 0 0 2 transpose - -;
#X obj 954 371 *~;
#X obj 972 349 line~;
#X msg 972 326 \$1 20;
#X obj 972 306 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 955 134 r~ \$0-sig;
#X text 1004 182 5 bands;
#X obj 954 269 reshift~ C wholetone 440 5 15 0;
#X symbolatom 1315 243 3 0 0 2 key - -;
#X symbolatom 1367 243 10 0 0 2 scale - -;
#X floatatom 1446 244 5 0 0 2 t_smooth - -;
#X floatatom 1506 243 5 0 0 2 transpose - -;
#X obj 1264 371 *~;
#X obj 1282 349 line~;
#X msg 1282 326 \$1 20;
#X obj 1282 306 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1265 134 r~ \$0-sig;
#X text 1314 182 6 bands;
#X obj 1264 269 reshift~ C wholetone 440 6 15 0;
#X symbolatom 1625 243 3 0 0 2 key - -;
#X symbolatom 1677 243 10 0 0 2 scale - -;
#X floatatom 1756 244 5 0 0 2 t_smooth - -;
#X floatatom 1816 243 5 0 0 2 transpose - -;
#X obj 1574 371 *~;
#X obj 1592 349 line~;
#X msg 1592 326 \$1 20;
#X obj 1592 306 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1575 134 r~ \$0-sig;
#X text 1624 182 10 bands;
#X obj 1574 269 reshift~ C wholetone 440 10 15 0;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X connect 1 0 9 0;
#X connect 2 0 9 1;
#X connect 3 0 9 2;
#X connect 4 0 9 3;
#X connect 5 0 9 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 11 0;
#X connect 11 0 0 0;
#X connect 12 0 11 1;
#X connect 13 0 12 0;
#X connect 14 0 13 0;
#X connect 16 0 25 1;
#X connect 17 0 25 2;
#X connect 18 0 25 3;
#X connect 19 0 25 4;
#X connect 20 0 0 0;
#X connect 21 0 20 1;
#X connect 22 0 21 0;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 25 0 20 0;
#X connect 27 0 37 1;
#X connect 28 0 37 2;
#X connect 29 0 37 3;
#X connect 30 0 37 4;
#X connect 31 0 0 0;
#X connect 32 0 31 1;
#X connect 33 0 32 0;
#X connect 34 0 33 0;
#X connect 35 0 37 0;
#X connect 37 0 31 0;
#X connect 38 0 48 1;
#X connect 39 0 48 2;
#X connect 40 0 48 3;
#X connect 41 0 48 4;
#X connect 42 0 0 0;
#X connect 43 0 42 1;
#X connect 44 0 43 0;
#X connect 45 0 44 0;
#X connect 46 0 48 0;
#X connect 48 0 42 0;
#X connect 49 0 59 1;
#X connect 50 0 59 2;
#X connect 51 0 59 3;
#X connect 52 0 59 4;
#X connect 53 0 0 0;
#X connect 54 0 53 1;
#X connect 55 0 54 0;
#X connect 56 0 55 0;
#X connect 57 0 59 0;
#X connect 59 0 53 0;
#X connect 60 0 70 1;
#X connect 61 0 70 2;
#X connect 62 0 70 3;
#X connect 63 0 70 4;
#X connect 64 0 0 0;
#X connect 65 0 64 1;
#X connect 66 0 65 0;
#X connect 67 0 66 0;
#X connect 68 0 70 0;
#X connect 70 0 64 0;
#X connect 71 0 72 0;
#X connect 72 0 6 0;
#X restore 34 366 pd inharmonizer;
#X obj 36 398 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 105 253 505 356 vibrato 0;
#X obj 16 277 throw~ \$0-fx_sig;
#X obj 16 142 r~ \$0-sig;
#X symbolatom 66 207 3 0 0 2 key - -;
#X symbolatom 118 207 10 0 0 2 scale - -;
#X floatatom 197 208 5 0 0 2 t_smooth - -;
#X floatatom 257 207 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X obj 15 232 reshift~ C ionian 440 200 15 0;
#X obj 348 269 snapshot~;
#X floatatom 388 177 5 0 0 1 range - -;
#X obj 421 241 metro 10;
#X floatatom 350 117 5 0 0 2 freq - -;
#X text 19 24 pitch discretized vibrato;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X obj 421 208 loadbang;
#X obj 350 145 osc~ 1;
#X obj 349 199 *~ 3;
#X connect 1 0 9 0;
#X connect 2 0 9 1;
#X connect 3 0 9 2;
#X connect 4 0 9 3;
#X connect 5 0 9 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 0 0;
#X connect 10 0 9 4;
#X connect 11 0 19 1;
#X connect 12 0 10 0;
#X connect 13 0 18 0;
#X connect 15 0 16 0;
#X connect 16 0 6 0;
#X connect 17 0 12 0;
#X connect 18 0 19 0;
#X connect 19 0 10 0;
#X restore 36 422 pd vibrato;
#X obj 368 227 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 368 347 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 638 316 784 628 pitch_disc_feedback_delay 0;
#X obj 255 595 throw~ \$0-fx_sig;
#X obj 254 161 r~ \$0-sig;
#X symbolatom 442 314 3 0 0 2 key - -;
#X symbolatom 494 314 10 0 0 2 scale - -;
#X floatatom 573 315 5 0 0 2 t_smooth - -;
#X floatatom 633 314 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X floatatom 390 184 5 0 0 2 delay - -;
#X floatatom 429 185 5 0 0 2 feedback - -;
#X obj 429 410 clip -0.9 0.9;
#X obj 390 223 delread~ \$0-pdfbd 400;
#X obj 391 473 delwrite~ \$0-pdfbd 1000;
#X obj 390 435 *~ 0.7;
#X obj 391 339 reshift~ C ionian 440 200 0 0;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X text 18 84 Delay with pitch discretization in feedback path. Interesting
with different scales and transposition.;
#X connect 1 0 0 0;
#X connect 1 0 13 0;
#X connect 2 0 15 1;
#X connect 3 0 15 2;
#X connect 4 0 15 3;
#X connect 5 0 15 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 12 0;
#X connect 10 0 11 0;
#X connect 11 0 14 1;
#X connect 12 0 0 0;
#X connect 12 0 15 0;
#X connect 14 0 13 0;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X connect 17 0 6 0;
#X restore 368 371 pd pitch_disc_feedback_delay;
#X msg 421 100 ../../../samples/saxophone-weep.wav;
#N canvas 72 291 669 456 pitch_disc_feed_forward_delay_dry 0;
#X obj 255 390 throw~ \$0-fx_sig;
#X obj 254 161 r~ \$0-sig;
#X symbolatom 305 253 3 0 0 2 key - -;
#X symbolatom 357 253 10 0 0 2 scale - -;
#X floatatom 436 254 5 0 0 2 t_smooth - -;
#X floatatom 496 253 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X obj 28 306 delwrite~ \$0-pdffd 1000;
#X obj 27 204 delread~ \$0-pdffd 400;
#X obj 27 268 *~ 0.3;
#X floatatom 27 165 5 0 0 2 delay - -;
#X floatatom 76 166 5 0 0 2 feedback - -;
#X obj 66 243 clip -0.9 0.9;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X obj 254 278 reshift~ C wholetone 440 200 0 3;
#X text 18 84 Delay with pitch discretization in dry feed forward path.
(interesting with transposition and different scales);
#X connect 1 0 9 0;
#X connect 1 0 17 0;
#X connect 2 0 17 1;
#X connect 3 0 17 2;
#X connect 4 0 17 3;
#X connect 5 0 17 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 10 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 11 1;
#X connect 15 0 16 0;
#X connect 16 0 6 0;
#X connect 17 0 0 0;
#X restore 368 250 pd pitch_disc_feed_forward_delay_dry;
#X obj 368 287 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 72 291 669 513 pitch_disc_feed_forward_delay_wet 0;
#X obj 256 459 throw~ \$0-fx_sig;
#X obj 255 230 r~ \$0-sig;
#X symbolatom 375 323 3 0 0 2 key - -;
#X symbolatom 427 323 10 0 0 2 scale - -;
#X floatatom 506 324 5 0 0 2 t_smooth - -;
#X floatatom 566 323 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X floatatom 28 234 5 0 0 2 delay - -;
#X floatatom 77 235 5 0 0 2 feedback - -;
#X obj 67 312 clip -0.9 0.9;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X obj 28 273 delread~ \$0-pdffdw 400;
#X obj 29 375 delwrite~ \$0-pdffdw 1000;
#X obj 28 337 *~ 0.5;
#X text 18 84 Delay with pitch discretization in feed forward wet path.
Interesting with different scales and transposition. There are pitch
jumps because the delay makes the input of reshift polyphonic.;
#X obj 324 348 reshift~ C aeolian 440 200 0 -3;
#X connect 1 0 15 0;
#X connect 1 0 0 0;
#X connect 2 0 18 1;
#X connect 3 0 18 2;
#X connect 4 0 18 3;
#X connect 5 0 18 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 14 0;
#X connect 10 0 11 0;
#X connect 11 0 16 1;
#X connect 12 0 13 0;
#X connect 13 0 6 0;
#X connect 14 0 16 0;
#X connect 14 0 18 0;
#X connect 16 0 15 0;
#X connect 18 0 0 0;
#X restore 368 310 pd pitch_disc_feed_forward_delay_wet;
#X text 14 610 Manuel Planton 2021;
#X obj 37 457 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 72 405 505 384 two_voices 0;
#X obj 22 294 throw~ \$0-fx_sig;
#X obj 22 159 r~ \$0-sig;
#X symbolatom 102 224 3 0 0 2 key - -;
#X symbolatom 154 224 10 0 0 2 scale - -;
#X floatatom 233 225 5 0 0 2 t_smooth - -;
#X floatatom 293 224 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X text 18 84 Adding a pitch discretized voice to a signal. Sounds
best if the right key and scale is found.;
#X obj 51 249 reshift~ F# aeolian 440 200 15 -7;
#X connect 1 0 0 0;
#X connect 1 0 12 0;
#X connect 2 0 12 1;
#X connect 3 0 12 2;
#X connect 4 0 12 3;
#X connect 5 0 12 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 6 0;
#X connect 12 0 0 0;
#X restore 37 481 pd two_voices;
#X obj 37 515 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 72 405 505 413 scramble 0;
#X obj 31 293 throw~ \$0-fx_sig;
#X obj 31 158 r~ \$0-sig;
#X symbolatom 81 223 3 0 0 2 key - -;
#X symbolatom 133 223 10 0 0 2 scale - -;
#X floatatom 212 224 5 0 0 2 t_smooth - -;
#X floatatom 272 223 5 0 0 2 transpose - -;
#X obj 310 55 switch~;
#X obj 310 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 310 6 inlet;
#X obj 370 5 loadbang;
#X msg 370 30 0;
#X text 26 85 A very high pitch shifting factor results in a "scrambling"
effect due to aliasing in the subbands of the Rollers pitch-shifting
algorithm.;
#X obj 30 248 reshift~ F# aeolian 440 200 15 111;
#X connect 1 0 12 0;
#X connect 2 0 12 1;
#X connect 3 0 12 2;
#X connect 4 0 12 3;
#X connect 5 0 12 4;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 6 0;
#X connect 12 0 0 0;
#X restore 37 539 pd scramble;
#X obj 362 490 r~ \$0-sig;
#X obj 361 535 *~ 0;
#X obj 386 515 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 359 469 original;
#X text 443 468 FX;
#X obj 468 515 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 443 535 *~ 1;
#X text 148 366 <-- look inside;
#X connect 2 0 5 1;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 10 0 11 0;
#X connect 10 0 11 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 10 1;
#X connect 15 0 42 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 20 0 21 0;
#X connect 22 0 23 0;
#X connect 24 0 28 0;
#X connect 25 0 26 0;
#X connect 27 0 5 0;
#X connect 29 0 30 0;
#X connect 32 0 33 0;
#X connect 34 0 35 0;
#X connect 36 0 37 0;
#X connect 37 0 10 0;
#X connect 38 0 37 1;
#X connect 41 0 42 1;
#X connect 42 0 10 0;
