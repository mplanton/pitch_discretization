#N canvas 227 204 827 714 12;
#X text 217 5 quantize frequency input to musical scales;
#X obj 13 37 inlet freq;
#X obj 13 649 outlet quantized_freq;
#X obj 13 63 ftom;
#X obj 13 617 mtof;
#X text 49 63 A440 = 69;
#X obj 97 401 tabread \$0-octave;
#X text 8 5 quantizer <key> <scale>;
#X obj 97 312 % 12;
#X obj 400 96 table \$0-octave 12;
#N canvas 1226 385 459 334 pos_round 0;
#X text 109 13 round a positive number;
#X obj 13 16 inlet num;
#X obj 13 284 outlet rounded;
#X obj 46 79 wrap;
#X obj 46 104 moses 0.5;
#X obj 13 243 int;
#X obj 94 212 + 1;
#X obj 13 54 t f f;
#N canvas 1081 499 450 300 multiplex 0;
#X obj 11 14 inlet sig;
#X obj 300 18 inlet switch;
#X obj 11 265 outlet A;
#X obj 258 270 outlet B;
#X obj 11 153 spigot;
#X msg 61 111 0;
#X msg 20 111 1;
#X obj 142 156 spigot;
#X msg 180 120 0;
#X msg 220 120 1;
#X obj 105 52 sel 0 1;
#X connect 0 0 4 0;
#X connect 0 0 7 0;
#X connect 1 0 10 0;
#X connect 4 0 2 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 3 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 6 0;
#X connect 10 0 8 0;
#X connect 10 1 5 0;
#X connect 10 1 9 0;
#X restore 13 180 pd multiplex;
#X msg 106 131 1;
#X msg 46 131 0;
#X connect 1 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 4 1 9 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 7 1 3 0;
#X connect 8 0 5 0;
#X connect 8 1 6 0;
#X connect 9 0 8 1;
#X connect 10 0 8 1;
#X restore 65 181 pd pos_round;
#X text 89 204 chromatic;
#X obj 65 284 t f f;
#X obj 57 312 / 12;
#X obj 57 343 int;
#X obj 57 449 * 12;
#X obj 79 491 +;
#X obj 65 237 -;
#X text 92 237 transpose to C;
#X obj 79 526 +;
#X text 111 525 transpose back to original key;
#X obj 211 36 inlet key;
#X obj 400 37 inlet scale;
#X text 8 687 Manuel Planton 2021;
#X text 131 314 tone;
#X text 5 346 octave;
#X text 105 381 scale mapping;
#N canvas 1024 121 859 892 set_scales 0;
#X obj 597 220 print quantizer;
#X msg 597 192 Error: no such scale as \$1;
#X text 176 127 By sending values to tables \, the first arg is a kind
of wrap around value und then comes the zeroth value and so on.;
#X msg 147 251 0 0 2 2 4 5 5 7 7 9 9 11;
#X obj 19 704 serialize;
#X obj 19 731 % 12;
#X obj 19 838 tabwrite \$0-octave;
#X obj 51 793 i;
#X msg 69 759 0;
#X obj 19 758 t f b;
#X obj 87 794 + 1;
#X obj 19 167 select chromatic wholetone ionian dorian lydian phrygian
mixolydian aeolian locrian, f 83;
#X obj 19 676 t l b;
#X obj 19 29 loadbang;
#X obj 19 54 symbol \$2;
#X msg 212 276 0 0 2 3 3 5 5 7 7 9 10 10;
#X msg 275 302 0 0 2 2 4 4 6 7 7 9 9 11;
#X msg 313 330 0 1 1 3 3 5 5 7 8 8 10 10;
#X text 326 251 C-ionian: c \, d \, e \, f \, g \, a \, b;
#X text 498 331 C-phrygian: c \, db \, eb \, f \, g \, ab \, bb;
#X text 603 415 C-locrian: c \, db \, eb \, f \, gb \, ab \, bb;
#X text 397 278 C-dorian: c \, d \, eb \, f \, g \, a \, bb;
#X text 455 303 C-lydian: c \, d \, e \, f# \, g \, a \, b;
#X msg 19 201 0 1 2 3 4 5 6 7 8 9 10 11;
#X msg 85 226 0 0 2 2 4 4 6 6 8 8 10 10;
#X text 267 227 C-wholetone: c \, d \, e \, f# \, g# \, a#;
#X text 578 385 C-aeolian: c \, d \, eb \, f \, g \, ab \, bb;
#X msg 392 385 0 0 2 3 3 5 5 7 8 8 10 10;
#X msg 421 415 0 1 1 3 3 5 6 6 8 8 10 10;
#X symbolatom 113 68 10 0 0 0 - - -;
#X text 204 201 C-chromatic;
#X text 329 574 Next maybe WTHT \, etc.;
#X obj 102 29 inlet scale;
#X text 17 4 Set the table with the right scale mappings from chromatic
to the given scale., f 79;
#X msg 349 357 0 0 2 2 4 5 5 7 7 9 10 10;
#X text 533 358 C-mixolydian: c \, d \, e \, f \, g \, a \, bb;
#X connect 1 0 0 0;
#X connect 3 0 12 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 7 0 6 1;
#X connect 7 0 10 0;
#X connect 8 0 7 1;
#X connect 9 0 6 0;
#X connect 9 1 7 0;
#X connect 10 0 7 1;
#X connect 11 0 23 0;
#X connect 11 1 24 0;
#X connect 11 2 3 0;
#X connect 11 3 15 0;
#X connect 11 4 16 0;
#X connect 11 5 17 0;
#X connect 11 6 34 0;
#X connect 11 7 27 0;
#X connect 11 8 28 0;
#X connect 11 9 1 0;
#X connect 12 0 4 0;
#X connect 12 1 8 0;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X connect 15 0 12 0;
#X connect 16 0 12 0;
#X connect 17 0 12 0;
#X connect 23 0 12 0;
#X connect 24 0 12 0;
#X connect 27 0 12 0;
#X connect 28 0 12 0;
#X connect 29 0 11 0;
#X connect 32 0 11 0;
#X connect 34 0 12 0;
#X restore 400 72 pd set_scales;
#X obj 678 96 inlet transpose;
#N canvas 1260 685 599 382 get_key_number 0;
#X obj 16 19 inlet key;
#X obj 14 346 outlet key_number;
#X obj 26 86 loadbang;
#X obj 26 114 symbol \$1;
#X obj 373 198 print quantizer;
#X msg 373 170 Error: no such note as \$1;
#X obj 26 143 select C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B;
#X msg 26 171 0;
#X msg 46 196 1;
#X msg 66 171 2;
#X msg 86 196 3;
#X msg 126 171 4;
#X msg 146 196 5;
#X msg 176 171 6;
#X msg 196 196 7;
#X msg 231 171 8;
#X msg 251 196 9;
#X msg 291 171 10;
#X msg 312 196 11;
#X text 132 116 enumerate notes from C to B;
#X obj 26 267 +;
#X connect 0 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 6 1 8 0;
#X connect 6 2 8 0;
#X connect 6 3 9 0;
#X connect 6 4 10 0;
#X connect 6 5 10 0;
#X connect 6 6 11 0;
#X connect 6 7 12 0;
#X connect 6 8 13 0;
#X connect 6 9 13 0;
#X connect 6 10 14 0;
#X connect 6 11 15 0;
#X connect 6 12 15 0;
#X connect 6 13 16 0;
#X connect 6 14 17 0;
#X connect 6 15 17 0;
#X connect 6 16 18 0;
#X connect 6 17 5 0;
#X connect 7 0 20 0;
#X connect 8 0 20 0;
#X connect 9 0 20 0;
#X connect 10 0 20 0;
#X connect 11 0 20 0;
#X connect 12 0 20 0;
#X connect 13 0 20 0;
#X connect 14 0 20 0;
#X connect 15 0 20 0;
#X connect 16 0 20 0;
#X connect 17 0 20 0;
#X connect 18 0 20 0;
#X connect 20 0 1 0;
#X restore 341 236 pd get_key_number;
#X obj 341 268 t f f;
#X obj 79 578 +;
#X connect 1 0 3 0;
#X connect 3 0 10 0;
#X connect 4 0 2 0;
#X connect 6 0 16 1;
#X connect 8 0 6 0;
#X connect 10 0 17 0;
#X connect 12 0 13 0;
#X connect 12 1 8 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 19 0;
#X connect 17 0 12 0;
#X connect 19 0 31 0;
#X connect 21 0 29 0;
#X connect 22 0 27 0;
#X connect 28 0 31 1;
#X connect 29 0 30 0;
#X connect 30 0 19 1;
#X connect 30 1 17 1;
#X connect 31 0 4 0;
